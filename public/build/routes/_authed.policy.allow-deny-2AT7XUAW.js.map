{
  "version": 3,
  "sources": ["../../../app/routes/_authed.policy.allow-deny.tsx"],
  "sourcesContent": ["// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/routes/_authed.policy.allow-deny.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/routes/_authed.policy.allow-deny.tsx\");\n  import.meta.hot.lastModified = \"1708356365268.503\";\n}\n// REMIX HMR END\n\nimport { json } from '@remix-run/cloudflare';\nimport { Outlet, useLoaderData, useNavigate } from '@remix-run/react';\nimport { requireUser } from 'app/utils/authentication/session.server';\nimport { getAllowDenyList } from 'app/utils/account/account.server';\nimport { useState } from 'react';\nexport const meta = () => {\n  return [{\n    title: \"Web3Firewall - Allow Deny List\"\n  }];\n};\nexport const loader = async ({\n  request,\n  context\n}) => {\n  const user = await requireUser(request, context);\n  const allowDenyList = await getAllowDenyList(user.token);\n  const addressList = [];\n  allowDenyList.allowList.forEach(address => {\n    addressList.push({\n      address,\n      allowed: true,\n      category: 'None'\n    });\n  });\n  allowDenyList.denyList.forEach(address => {\n    addressList.push({\n      address: address.address,\n      allowed: false,\n      category: address.category\n    });\n  });\n  return json({\n    addresses: addressList\n  });\n};\nexport const action = async ({\n  request\n}) => {\n  return json({});\n};\nexport default function AllowDenyListPage() {\n  _s();\n  const {\n    addresses\n  } = useLoaderData();\n  const [filter, setFilter] = useState('');\n  const navigate = useNavigate();\n  const filterUpdate = e => {\n    setFilter(e.target.value);\n  };\n  const filteredPolicies = addresses.filter(address => {\n    const foundMatch = {\n      allow: undefined,\n      deny: undefined,\n      category: undefined,\n      notCategory: undefined,\n      address: undefined\n    };\n    const lowerFilter = filter.toLowerCase();\n    const filterParts = lowerFilter.split(' ');\n    filterParts.forEach(part => {\n      if (part === 'rule:'.substring(0, part.length) || part.length > 2 && part === 'category:'.substring(0, part.length)) {\n        // reserve judgement until the user finishes typing\n      } else if (part.startsWith('rule:a')) {\n        foundMatch.allow = address.allowed;\n      } else if (part.startsWith('rule:d')) {\n        foundMatch.deny = !address.allowed;\n      } else if (part.startsWith('category:')) {\n        foundMatch.category = foundMatch.category || !!address.category.toLowerCase().startsWith(part.substring('category:'.length));\n      } else if (part.startsWith('-category:')) {\n        foundMatch.notCategory = foundMatch.notCategory || !!address.category.toLowerCase().startsWith(part.substring('-category:'.length));\n      } else {\n        foundMatch.address = foundMatch.address || address.address.toLowerCase().includes(part);\n      }\n    });\n    return (foundMatch.allow === true || foundMatch.deny === true || foundMatch.allow === undefined && foundMatch.deny === undefined) && foundMatch.address !== false && foundMatch.category !== false && foundMatch.notCategory !== true;\n  });\n  return <div className=\"px-4 sm:px-6 lg:px-8\">\n      <div className=\"sm:flex sm:items-center\">\n        <div className=\"sm:flex-auto\">\n          <h1 className=\"text-base font-semibold leading-6 text-gray-900\">Allowed and Denied Addresses</h1>\n          <p className=\"mt-2 text-sm text-gray-700\">\n            The list of addresses that are configured for the account.\n          </p>\n        </div>\n        <div className=\"mt-4 sm:ml-16 sm:mt-0 sm:flex-none\">\n          <button type=\"button\" onClick={() => navigate('new', {\n          relative: 'route'\n        })} className=\"block rounded-md bg-indigo-600 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600\">\n            Add New Address\n          </button>\n        </div>\n      </div>\n      <div className=\"mt-2\">\n        <input onChange={filterUpdate} type=\"text\" name=\"search-filter\" id=\"search-filter\" className=\"block w-full rounded-full border-0 px-4 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\" placeholder=\"Find an address\" />\n      </div>\n      <div className=\"mt-8 flow-root\">\n        <div className=\"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8\">\n          <div className=\"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8\">\n            <table className=\"min-w-full divide-y divide-gray-300\">\n              <thead>\n                <tr>\n                  <th scope=\"col\" className=\"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0\">\n                    Address\n                  </th>\n                  <th scope=\"col\" className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">\n                    Rule\n                  </th>\n                  <th scope=\"col\" className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">\n                    Category\n                  </th>\n                  <th scope=\"col\" className=\"relative py-3.5 pl-3 pr-4 sm:pr-0\">\n                    <span className=\"sr-only\">Remove</span>\n                  </th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-gray-200\">\n                {filteredPolicies.map((address, index) => <tr key={index}>\n                    <td className=\"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-0\">\n                      {address.address}\n                    </td>\n                    <td className=\"whitespace-nowrap px-3 py-4 text-sm text-gray-500\">{address.allowed ? 'Allow' : 'Deny'}</td>\n                    <td className=\"whitespace-nowrap px-3 py-4 text-sm text-gray-500\">{address.category}</td>\n                    <td className=\"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-0\">\n                      <a href=\"#\" className=\"text-indigo-600 hover:text-indigo-900\">\n                        Remove<span className=\"sr-only\">, {address.address}</span>\n                      </a>\n                    </td>\n                  </tr>)}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n      <Outlet />\n    </div>;\n}\n_s(AllowDenyListPage, \"uVkaTzmTWFJw9tk5NalYQ8KpLek=\", false, function () {\n  return [useLoaderData, useNavigate];\n});\n_c = AllowDenyListPage;\nvar _c;\n$RefreshReg$(_c, \"AllowDenyListPage\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;"],
  "mappings": "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",
  "names": ["import_react"]
}
